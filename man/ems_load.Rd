% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ems_load.R
\name{ems_load}
\alias{ems_load}
\title{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}} Load data specifications}
\usage{
ems_load(
  ems_input,
  dat_input = NULL,
  par_input = NULL,
  set_input = NULL,
  aux_input = NULL,
  unaggregated_input = NULL,
  aggregated_input = NULL,
  ...
)
}
\arguments{
\item{ems_input}{Master input generated by \code{\link[=ems_data]{ems_data()}}.}

\item{dat_input}{Input containing base coefficient data.
\itemize{
\item Character of length 1, file name in working directory or path
to a GTAP data "dat" HAR file.
\item Equivalent list object generated by \code{\link[=ems_data]{ems_data()}}.
}}

\item{par_input}{Input containing parameter coefficient data.
Character of length 1, file name in working directory or
path to a GTAP parameter "par" HAR file.
\itemize{
\item Equivalent list object generated by \code{\link[=ems_data]{ems_data()}}.
}}

\item{aux_input}{Input containing auxillary coefficient data.
Currently used primarily to load time related data for
dynamic models.
\itemize{
\item Character of length 1, file name in working directory or path
to a GTAP HAR file.
\item Equivalent list object generated by \code{\link[=ems_data]{ems_data()}}.
}}

\item{unaggregated_input}{A named list (default is \code{NULL}).
Key-value pairs denoting the name of the header to replace
and path to a CSV file or data frame or data frame extension
containing data. User-provided data must contain all
corresponding sets and associated elements present in the
original header data as well as a "Value" column with new
values. This replacement will be subject to structure checks
and set aggregations.}

\item{aggregated_input}{A named list (default is \code{NULL}).
Key-value pairs denoting the name of the header to replace
and path to a CSV file or data frame or data frame extension
containing data. A length 1 numeric may be provided for
coefficents with no set affiliations (e.g., binary
switches). User-provided data must contain all set
aggregation-specific elements to be replaced as well as a
"Value" column with new values. This replacement will be
subject to structure checks according to selected set
aggregations.}
}
\value{
A list of data configuration options.
}
\description{
\code{ems_load()} loads coefficient data including
base data, parameters, and any auxillary data as well as
conducts pre-pipleine checks. The output of this function is
a required input to the \code{"load_config"} argument within the
\code{\link[=ems_deploy]{ems_deploy()}} function.
}
\details{
\code{ems_load()} return values have no purpose used in
isolation and are rather combined with user inputs in other
\code{teems} package functions within \code{\link[=ems_deploy]{ems_deploy()}} to produce
a path-dependent pipeline resulting in solver-ready input
files for \code{\link[=ems_solve]{ems_solve()}}.
}
\examples{
\dontrun{
# GTAP 11 data for the standard GTAP model
teems_data(dat_input = "your/local/path/flexAgg11c17/gsdfdat.har",
           par_input = "your/local/path/flexAgg11c17/gsdfpar.har")

# GTAP 10 data for the classic GTAP model
teems_data(dat_input = "your/local/path/flexagg10AY14/gsddat.har",
           par_input = "your/local/path/flexagg10AY14/gsdpar.har")
           
# GTAP 11 data for the classic GTAP model
all_data <- GTAP_convert("your/local/path/flexAgg11c17/gsdfdat.har",
                         "your/local/path/flexAgg11c17/gsdfpar.har",
                         "your/local/path/flexAgg11c17/gsdfset.har",
                          tab_file = "GTAPv7.0",
                          target_format = "v6.2")
                          
teems_data(dat_input = all_data$dat,
           par_input = all_data$par)

# Data can also be loaded in the list format generated by GTAP_convert()
converted_dat <- GTAP_convert("your/local/path/flexAgg11c17/gsdfdat.har")

teems_data(dat_input = converted_dat,
           par_input = "your/local/path/flexAgg11c17/gsdfpar.har")

# Specific headers may be modified at the unaggregated and aggregated stages.
# Set convention is hybrid (see ...)

# Unaggregated inputs
# These inputs must contain all tuples of the data that it is to 
# replace as per the database in use, plus a `Value` column.
ETRAE <- data.frame(
  ENDW_COMMi = c("ag_othlowsk",
  "capital",
  "clerks",
  "land",
  "natlres",
  "off_mgr_pros",
  "service_shop",
  "tech_aspros"),
  Value = c(0, 0, 0, -1, -0.002, 0, 0))

teems_data(dat_input = "your/local/path/flexagg10AY14/gsddat.har",
           par_input = "your/local/path/flexagg10AY14/gsdpar.har",
           unaggregated_input = ETRAE)                 

# Aggregated inputs
# These inputs must contain all tuples of the data that it is to 
# replace as per selected set aggregations, plus a `Value` column.
ETRAE <- expand.grid(ENDWe = c("capital", "labor", "land", "natlres"),
                     REGr = c("chn", "row", "usa"))
ETRAE$Value <- rep(c(0, 0, -1, -0.002), 3)

teems_data(dat_input = "your/local/path/flexAgg11c17/gsdfdat.har",
           par_input = "your/local/path/flexAgg11c17/gsdfpar.har",
           aggregated_input = list(ETRE = ETRAE,
                                   RDLT = 0))
}
}
\seealso{
\code{\link[=ems_deploy]{ems_deploy()}} for loading the output of this
function.
}
