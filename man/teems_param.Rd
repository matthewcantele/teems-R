% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/usr_teems_param.R
\name{teems_param}
\alias{teems_param}
\title{Load parameter specifications}
\usage{
teems_param(
  ...,
  par_har,
  RORDELTA = TRUE,
  header_rename = NULL,
  coefficient_rename = NULL,
  preagg_data = NULL,
  postagg_data = NULL
)
}
\arguments{
\item{par_har}{Character of length 1, file name in working
directory or path to a GTAP parameter HAR file.}

\item{RORDELTA}{Logical of length 1 (default is \code{TRUE}). RORDELTA
determines the mechanism of allocating investment funds across
regions within static model runs.  When TRUE, investment funds
are allocated across regions to equate the change in the expected
rates of return (i.e., rore(r)).  When FALSE, investment funds
are allocated across regions to maintain the existing composition
of capital stocks.}

\item{header_rename}{A named vector (default is \code{NULL}). Supplies
custom origin and destination matches for database headers that
will supercede any matching default result. The name of each
element will be used to identify the header to rename, and the
value will become the new name. Note that corresponding changes
to the Tablo file are not conducted.}

\item{coefficient_rename}{A named vector (default is \code{NULL}).
Supplies custom origin and destination matches for database
coefficients that will supercede any matching default result. The
name of each element will be used to identify the coefficient to
rename, and the value will become the new name. Note that
corresponding changes to the Tablo file are not conducted.}

\item{preagg_data}{A named vector (default is \code{NULL}).
Path pair which replaces existing preaggregation (unmodified)
data headers. The name of each element determines the header for
which to replace data. The value is a path to a .csv. The
user-provided data must contain all corresponding sets and
associated elements as in the original data to be replaced, as
well as a "Value" column with new values. This replacement will be
subject to structure checks and set aggregations.}

\item{postagg_data}{A named vector (default is \code{NULL}).
Path pair which replaces existing aggregated data headers. The
user-provided data must contain all aggregation-specific
corresponding sets and associated elements as in the aggregated
data to be replaced as well as a "Value" column with new values.
This replacement will be subject to structure checks according to
selected set aggregations.}
}
\value{
A list of parameter configuration options.
}
\description{
\code{teems_param()} loads parameter-specific data and
configurations as well as binary parameter specifications for
static models. The output of this function is a required value
for the \code{\link[=teems_write]{teems_write()}} \code{"param_config"} argument.
}
\details{
\code{teems_param()} return values have no purpose used in
isolation and are rather combined with user inputs in other
\code{teems} package functions within \code{\link[=teems_deploy]{teems_deploy()}} to produce a
path-dependent pipeline resulting in solver-ready input files for
\code{\link[=teems_solve]{teems_solve()}}.
}
\examples{
# See `vignette("something")` for examples and explanation

temp_dir <- tools::R_user_dir(package = "teems", "cache")
if (!dir.exists(temp_dir)) {
  dir.create(temp_dir)
}
file.copy(from = c(teems_example(path = "gdpar.har"),
                   teems_example(path = "SUBP.csv"),
                   teems_example(path = "SUBP_preagg.csv"),
                   teems_example(path = "SUBP_postagg.csv")),
          to = temp_dir)
path_to_har <- file.path(temp_dir, "gdpar.har")

# Renaming existing data headers and coefficients can be useful
# for header and coefficient consistency (e.g., ETRE, ETRAE).
param_config <- teems_param(par_har = path_to_har,
                            coefficient_rename = c("ETRAE" = "ETRE"))

# Users may introduce data here in two ways: pre-aggregation and
# post-aggregation. Pre-aggregation data must contain all tuples of
# the data that it is to replace, including a `Value` column. Set
# names must follow the `teems` convention (see vignette).
# Preaggregation parameters will be aggregated according to the
# default weighted aggregations (see vignette).
original_SUBP <- file.path(temp_dir, "SUBP.csv")
preagg_SUBP <- file.path(temp_dir, "SUBP_preagg.csv")
head(read.csv(original_SUBP))
head(read.csv(preagg_SUBP))

param_config <- teems_param(par_har = path_to_har,
                            preagg_data = c("SUBP" = preagg_SUBP))

# Post-aggregation data must contain all tuples of the aggregated
# data that it is to replace, including a `Value` column.
postagg_SUBP <- file.path(temp_dir, "SUBP_postagg.csv")

# sample region mapping
reg_mapping <- teems_query(component = "mapping",
                           database = "v9",
                           name = c(REG = "big3"))
sector_mapping <- teems_query(component = "mapping",
                              database = "v9",
                              name = c(TRAD_COMM = "macro_sector"))
head(read.csv(postagg_SUBP))
head(reg_mapping)
head(sector_mapping)
all(is.element(el = reg_mapping[["big3"]],
               set = read.csv(postagg_SUBP)[["REGr"]]))
all(is.element(el = sector_mapping[["macro_sector"]],
               set = read.csv(postagg_SUBP)[["TRAD_COMMi"]]))

param_config <- teems_param(par_har = path_to_har,
                            postagg_data = c("SUBP" = postagg_SUBP))

unlink(x = temp_dir, recursive = TRUE)

}
\seealso{
\code{\link[=teems_deploy]{teems_deploy()}} for loading the output of this
function.
}
