% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/usr_teems_model.R
\name{teems_model}
\alias{teems_model}
\title{Load general model specifications}
\usage{
teems_model(
  tab_file,
  model_version = NULL,
  ndigits = 6,
  full_exclude = c("DREL", "DVER", "XXCR", "XXCD", "XXCP", "SLUG"),
  notes = NULL,
  sets_csv_name = "sets.csv",
  data_csv_name = "basedata.csv",
  parameter_csv_name = "parameters.csv",
  int_data_csv_name = "time_data.csv",
  int_parameter_csv_name = "int_parameters.csv",
  verbose = FALSE
)
}
\arguments{
\item{tab_file}{Character of length 1, path to a local Tablo model
file or selection of an internal Tablo file. Internally available
Tablo files currently include GTAP-INTv1, GTAPv6.2, and GTAPv7.}

\item{model_version}{Character of length 1 (default is \code{NULL}),
GTAP model base version corresponding to the selected Tablo model
file. Note that this is distinct from the data format of input
data files. If \code{NULL}, the first 200 characters of the Tablo file
will be parsed with \code{model_version} assigned the value following
"Version". Choices:
\itemize{
\item \code{"v6.2"}: Classic GTAP model version 6.2 and models based off
this version. See: https://www.gtap.agecon.purdue.edu/resources/res_display.asp?RecordID=2458
\item \code{"v7.0"}: Standard GTAP model version 7 and models based off this
version. See: https://jgea.org/ojs/index.php/jgea/article/view/47
}}

\item{ndigits}{Integer (default is \code{6}). Exact number of digits to
the right of the decimal point to be written to file for numeric
type double (GEMPack equivalent "real"). This value is passed to
the \code{format()} nsmall argument and \code{round()} digits argument.}

\item{full_exclude}{A character vector. Specifies headers to fully
exclude from all aspects of the model run. Failure to designate
these headers properly will result in errors because some headers
cannot be aggregated or mapped. Modify with caution.}

\item{notes}{Character string (default is \code{NULL}). If not \code{NULL}
notes will be written to a .txt file within the model-specific
directory generated by \code{\link[=teems_deploy]{teems_deploy()}}.}

\item{sets_csv_name}{Character of length 1 (default is "sets.csv").
Name for the core set file that is written as output.}

\item{data_csv_name}{Character of length 1 (default is
"basedata.csv"). Name for the core data file that is written as
output.}

\item{parameter_csv_name}{Character of length 1 (default is
"parameters.csv"). Name for the core parameter file that is
written as output.}

\item{int_data_csv_name}{Character of length 1 (default is
"time_data.csv"). Name for the intertemporal data file that is
written as output.}

\item{int_parameter_csv_name}{Character of length 1 (default is
"int_parameters.csv"). Name for the intertemporal parameter file
that is written as output.}

\item{verbose}{Logical of length 1 (default is \code{FALSE}). If \code{TRUE} output
function-specific diagnostics.}
}
\value{
A list of general model configuration options.
}
\description{
\code{teems_model()} loads general model specifications,
conducts pre-pipeline checks, and determines temporal dynamics.
The output of this function is a required input to the
\code{"model_config"} argument within the \code{\link[=teems_deploy]{teems_deploy()}} function.

Learn more about this function including Tablo file limitations
in \code{vignette("something")}
}
\details{
\code{teems_model()} return values have no purpose used in
isolation and are rather combined with user inputs in other
\code{teems} package functions within \code{\link[=teems_deploy]{teems_deploy()}} to produce a
path-dependent pipeline resulting in solver-ready input files for
\code{\link[=teems_solve]{teems_solve()}}.
}
\examples{
# See `vignette("teems-input_files")` for examples and explanation.

# Internal Tablo Files
# GTAPv6.2 --------------------------------------------------------
# When `verbose` == `TRUE`, the detected type of temporal dynamics:
# static or intertemporal will be printed to the console.
model_config <- teems_model(tab_file = "GTAPv6.2",
                            notes = "initial run",
                            verbose = TRUE)

# Names of output files can be set within this function.
model_config <- teems_model(tab_file = "GTAPv6.2",
                            data_csv_name = "GTAPDATA.csv",
                            parameter_csv_name = "GTAPPARM.csv",
                            sets_csv_name = "GTAPSETS.csv")

# GTAPv7 ----------------------------------------------------------
# Double precision for all non-integer numeric outputs is set here.
model_config <- teems_model(tab_file = "GTAPv7",
                            ndigits = 12)

# GTAP-INTv1 ------------------------------------------------------
# An intertemporal model is internally available. For intertemporal
# model runs, the `time_config` argument within `teems_deploy()`
# will require the return values from `teems_time()`.
model_config <- teems_model(tab_file = "GTAP-INTv1",
                            note = "10 by 2 year intervals",
                            verbose = TRUE)

# User-provided Tablo Files ---------------------------------------
# Users can provide their own Tablo files. Some Tablo operations
# are not supported by the TEEMS solver (see vignnete) and
# Tablo-specific idiosyncrasies may not be automatically handled at
# the current developmental stage of this package.

# User-provided recursive or intertemporal models are unlikely to
# run properly at this stage with all package options. For these
# and other incompatible models, an `in-situ-solve` option within
# (funciton) is currently available.
temp_dir <- tools::R_user_dir(package = "teems", "cache")
if (!dir.exists(temp_dir)) {
  dir.create(temp_dir)
}
file.copy(from = teems_example(path = "user_model.tab"),
          to = temp_dir)
path_to_user_model <- file.path(temp_dir, "user_model.tab")

print(x = path_to_user_model)
head(x = readLines(path_to_user_model))
model_config <- teems_model(tab_file = path_to_user_model,
                            verbose = TRUE)

unlink(x = temp_dir, recursive = TRUE)

}
\seealso{
\code{\link[=teems_deploy]{teems_deploy()}} for loading the output of this
function.

\code{\link[=teems_time]{teems_time()}} for setting intertemporal configuration
options.
}
